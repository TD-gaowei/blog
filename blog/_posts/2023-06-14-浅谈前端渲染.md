---
title: 浅谈前端渲染
date: 2023-06-14
tags:
  - 架构
  - 前端渲染
author: qinghuanI
location: wuhan
---

新一代 Web 建站技术栈演进

## CSR

客户端渲染又称为前端渲染，起源于 JavaScript 的兴起，Ajax 让前端渲染更加成熟

在客户端渲染中，前端专注于 UI，后端专注业务于逻辑，真正意义上实现了前后端分离。前后端通过约定好的 API 来交互，后端提供数据，前端根据数据生成 DOM 插入 HTML 页面。性能消耗在客户端。

对于传统的 SPA（单页应用）来说，如果不进行一些额外的工作，那么它默认就是采用客户端渲染

市面上成熟的 SPA 框架有：

- React
- Vue
- Angular

## SSR

服务端渲染又称为后端渲染，英文是：Server-side rendering（SSR）。

服务端渲染需要部署前端的服务端（Node.js）

服务端渲染的过程为：服务器端执行 JS => 构建 HTML 页面（将 HTML 的符号（比如 {{}}）用数据填充） => 输出 HTML 给浏览器。

### 优缺点

优点

- **更快的首屏加载**：网页会以完全渲染的 HTML 形式交付给浏览器、可以显著提升性能和增加访问速度
- **更好的 SEO 优化** 相比与 SPA，搜索引擎爬虫可以直接看到完全渲染的页面，提供更好的 SEO 优化和可访问性

缺点

- 占用服务器资源，渲染工作都在服务端渲染
- 用户体验不好，每次跳转到新页面都需要在重新服务端渲染整个页面，不能只渲染可变区域

市面上成熟的 SSG 框架有：

- Next.js
- Remix

## Prerender

预渲染不需要部署前端的服务端（Node.js）

预渲染：在构建时为了特定的路由生成特定的几个静态页面，等于我们可以通过 Webpack 插件将一些特定页面组件 build 时就编译为 html 文件，直接以静态资源的形式输出给搜索引擎。

预渲染不执行 JS，只适用于纯静态页面

预渲染比较难加入交互机制，比如用户评价、提问，需要通过一些额外方式整合。

## SSG

静态网站生成器是一种基于原始数据和一组模板生成完整静态 HTML 网站的工具。从本质上讲，静态站点生成器自动完成对单个 HTML 页面进行编码的任务，并让这些页面提前准备好为用户提供服务。因为这些 HTML 页面是预先构建的，所以它们可以在用户的浏览器中非常快速地加载

### 优缺点

优点

- **性能高**：相比 SSR 减轻了服务器压力，还可以将生成的静态资源放到 CDN 上，充分利用缓存
- **SEO 友好**：搜索引擎爬虫可以直接抓取到最终页面内容
- **易于部署**：生成的静态页面可以直接部署到任何支持静态文件的 Web 服务器上，无需依赖 Node 环境等。
- **高度安全性**：由于服务器不需要运行程序，因此服务器漏洞仅限于操作系统本身，维护也更加方便。

缺点

- **纯静态页面**：只适用于静态数据，对于经常改动的数据，需要每次重新生成页面

### 使用场景

由于 SSG 的优缺点决定它适用于展示静态页面。比如开源产品的文档、技术博客或者公司官网等等

市面上成熟的 SSG 框架有

- VuePress 基于 vue 实现的静态页面生成器。比如
- Gatsby 是一个静态网站生成器，通过结合现代网络技术（如 React、GraphQL 和 Webpack）的力量，可用于构建快速、高性能的网站
- Docusaurus 是一个基于 React 的静态网站生成器，专门为构建文档网站而设

## ISR

增量式的网站渲染来自服务端渲染的发展，

代表框架有 Next.js 等等

## DPR

分布式的持续渲染

为了解决 ISR 的一系列问题，Netlify 在前段时间发起了一个新的提案：

DPR 本质上讲，是对 ISR 的模型做了几处改动，并且搭配上 CDN 的能力：

1. 去除了 fallback 行为，而是直接用 On-demand Builder（按需构建器）来响应未经过预渲染的页面，然后将结果缓存至 CDN；
2. 数据页面过期时，不再响应过期的缓存页面，而是 CDN 回源到 Builder 上，渲染出最新的数据；
3. 每次发布新版本时，自动清除 CDN 的缓存数据。

## Islands Architecture

这就是孤岛架构（Islands Architecture）的用武之地了。想象一下：你可以使用纯 HTML 和 CSS 为所有静态内容创建 Web 应用程序，然后添加动态内容或交互区域（孤岛），这些区域可以使用框架来添加交互性，并且这些区域可以使用任何框架，运行态框架只有在使用到它的页面上才会被下载，而不是在网站的初始加载中。

代表框架有 Qwik、Marko 等等
