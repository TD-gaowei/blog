---
title: 记输入框使用点
date: 2023-03-02
tags:
  - React
author: qinghuanI
location: wuhan
---


在 React 项目中使用 Input 时，有下面的场景

## Input 输入内容就触发逻辑

这种情况要加防抖

```tsx
import React, { useEffect, useState } from "react";
import type { ChangeEvent } from "react";

const Example = (): JSX.Element => {
  const [value, setValue] = useState<string>("");

  const onChange = useDebounceFn((e: ChangeEvent<HTMLInputElement>): void => {
    const value = e.target.value;
    setValue(value);
  });

  useEffect((): void => {
    if (value.trim()) {
      // do something
    }
  }, [value]);

  return <input onChange={onChange} type="text" />;
};

export default Example;
```

## Input 输完内容后，点击获取内容

- 当组件嵌套不深的时候，可以使用 useState 存储输入内容


```tsx
import React, { useState } from "react";
import type { ChangeEvent } from "react";

const Example = (): JSX.Element => {
  const [value, setValue] = useState<string>("");

  const onChange = useDebounceFn((e: ChangeEvent<HTMLInputElement>): void => {
    const value = e.target.value;
    setValue(value);
  });

  const getValue = (): void => {
    console.log("value =", value.trim());
  };

  return (
    <>
      <input onChange={onChange} type="text" />
      <button onClick={getValue}>点击输入内容</button>
    </>
  );
};

export default Example;
```

- 当组件嵌套很深，推荐使用 useRef, 不引起组件重渲染

```tsx
import type { ChangeEvent } from "react";
import React, { useRef } from "react";

const Example = (): JSX.Element => {
  const inputRef = useRef<string>("");

  const onChange = (e: ChangeEvent<HTMLInputElement>): void => {
    inputRef.current = e.target.value;
  };

  const getValue = (): void => {
    console.log("value =", inputRef.current.trim());
  };

  return (
    <>
      <input onChange={onChange} type="text" />
      <button onClick={getValue}>点击输入内容</button>
    </>
  );
};

export default Example;


```
